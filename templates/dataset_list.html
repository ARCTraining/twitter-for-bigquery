{% extends "base.html" %}
{% block bodycontent %}
	
		<button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="#myModal">
		  Add dataset
		</button>

		<h1>Datasets</h1>
		
		<p>View BigQuery datasets and tables in your project.</p>
		
		<br>
				
		<div>
		
			<table class="table table-striped">
			<thead>
	        <tr>
	          <th>Project</th>
	          <th>Dataset</th>
	          <th>Type</th>
	          <th>Rules</th>
	          <th>Actions</th>
	        </tr>
      		</thead>
      		<tbody id="table_data">
      		</tbody>
			</table>
			
        </div>
        
    </div>
    
	<hr>

    <div class="container page_footer">
    
    </div>
    <!-- /container -->

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Add Dataset</h4>
      </div>
      <div class="modal-body">

		<form class="form-horizontal">
		  <div class="form-group">
		    <label for="" class="col-sm-2 control-label">Type</label>
		    <div class="col-sm-10">
		      <select name="dataset_type" id="dataset_type" class="form-control">
		      	<option value="gnip">Gnip</option>
		      	<option value="twitter">Twitter Stream</option>
		      </select>
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 control-label">Project</label>
		    <div class="col-sm-10">
		      <input class="form-control align-right" id="dataset_project" type="text" value="{{projectIdName}}" readonly>
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 control-label">Name</label>
		    <div class="col-sm-3">
		      <input class="form-control align-right" id="dataset_name" type="text" value="gnip." readonly>
		    </div>
		    <div class="col-sm-7">
		      <input type="text" class="form-control" id="dataset_table" placeholder="YOUR_TABLE_NAME">
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 control-label">Rules</label>
		    <div class="col-sm-10">
		      <textarea class="form-control" id="dataset_rules" placeholder="" rows="4"></textarea>
		      <p class="help-block">Newline delimited</p>
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 control-label"></label>
		    <div class="col-sm-10 checkbox">
		    	<label for="dataset_import">
		      		<input type="checkbox" id="dataset_import"> Import last 7 days of data
	      		</label>
		    </div>
		  </div>
		  <div class="form-group" id="dataset_import_count">
		    <label for="" class="col-sm-2 control-label"></label>
		    <div class="col-sm-10">
			    <hr>
		      	<center>
		      		<img src="/static/img/loading.gif">
		      		<br>
		      		<br>
		      		<p>Calculating volume of tweets...</p>
		      	</center>
		    </div>
		  </div>
		</form>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary dataset_add">Save dataset</button>
      </div>
    </div>
  </div>
</div>

<script id="table_row" type="text/template">
<tr>
	<td>
		{{projectId}}
	</td>
	<td>
		{{datasetId}}.{{tableId}}
		<a href="https://bigquery.cloud.google.com/table/{{id}}" class="btn-sm" target="_target"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span></a>
	</td>
	<td>
		Gnip
	</td>
	<td>
		<ul>
		{{rulesStart}}<li>{{rulesValue}}{{rulesEnd}}
		</ul>
	</td>
	<td>
		<a class="dataset_delete" data-id="{{id}}" target="_target">delete</a>
	</td>
</tr>
</script>

<script language="JavaScript1.2">

$(document).ready(function(){

	  DatasetPage.init();
	
})

</script>

{% endblock %}